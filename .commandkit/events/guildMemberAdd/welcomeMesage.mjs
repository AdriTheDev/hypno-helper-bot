import {
  greetingCard_default
} from "../../chunk-XP2F66RO.mjs";
import {
  welcomeSchema_default
} from "../../chunk-TAXVAU2M.mjs";
import "../../chunk-LJIZ45IO.mjs";
import {
  __name
} from "../../chunk-G5GHKT7C.mjs";

// src/events/guildMemberAdd/welcomeMesage.ts
import { AttachmentBuilder } from "discord.js";
import { Font } from "canvacord";
async function welcomeMesage_default(member, client, handler) {
  const welcomeData = await welcomeSchema_default.findOne({ guildId: member.guild.id });
  if (!welcomeData)
    return;
  const channel = member.guild.channels.cache.get(welcomeData.channelId);
  if (!channel)
    return;
  const guild = member.guild;
  Font.loadDefault();
  await Font.fromFile("src/fonts/Rubik-Bold.ttf");
  const card = new greetingCard_default().setAvatar(member.user.displayAvatarURL()).setDisplayName(member.displayName).setType("welcome").setMessage(`Thanks for joining! You are member #${guild.memberCount}!`);
  const attachment = new AttachmentBuilder(await card.build({ format: "png" }), { name: "welcome.png" });
  channel.send({ content: welcomeData.message.replace("{user}", member).replace("{n}", "\n"), files: [attachment] });
}
__name(welcomeMesage_default, "default");
export {
  welcomeMesage_default as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vc3JjL2V2ZW50cy9ndWlsZE1lbWJlckFkZC93ZWxjb21lTWVzYWdlLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBBdHRhY2htZW50QnVpbGRlciwgdHlwZSBDbGllbnQsIHR5cGUgR3VpbGRNZW1iZXIsIHR5cGUgR3VpbGRUZXh0QmFzZWRDaGFubmVsIH0gZnJvbSAnZGlzY29yZC5qcyc7XG5pbXBvcnQgd2VsY29tZVNjaGVtYSBmcm9tICcuLi8uLi9zY2hlbWFzL3dlbGNvbWVTY2hlbWEnO1xuaW1wb3J0IEdyZWV0aW5nc0NhcmQgZnJvbSAnLi4vLi4vY2FyZHMvZ3JlZXRpbmdDYXJkJztcbmltcG9ydCB0eXBlIHsgQ29tbWFuZEtpdCB9IGZyb20gJ2NvbW1hbmRraXQnO1xuaW1wb3J0IHsgRm9udCB9IGZyb20gJ2NhbnZhY29yZCc7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIChtZW1iZXI6IEd1aWxkTWVtYmVyLCBjbGllbnQ6IENsaWVudDx0cnVlPiwgaGFuZGxlcjogQ29tbWFuZEtpdCkge1xuICBjb25zdCB3ZWxjb21lRGF0YSA9IGF3YWl0IHdlbGNvbWVTY2hlbWEuZmluZE9uZSh7IGd1aWxkSWQ6IG1lbWJlci5ndWlsZC5pZCB9KTtcbiAgaWYgKCF3ZWxjb21lRGF0YSkgcmV0dXJuO1xuXG4gIGNvbnN0IGNoYW5uZWwgPSBtZW1iZXIuZ3VpbGQuY2hhbm5lbHMuY2FjaGUuZ2V0KHdlbGNvbWVEYXRhLmNoYW5uZWxJZCkgYXMgR3VpbGRUZXh0QmFzZWRDaGFubmVsO1xuICBpZiAoIWNoYW5uZWwpIHJldHVybjtcblxuICBjb25zdCBndWlsZCA9IG1lbWJlci5ndWlsZDtcblxuICBGb250LmxvYWREZWZhdWx0KCk7XG4gIGF3YWl0IEZvbnQuZnJvbUZpbGUoJ3NyYy9mb250cy9SdWJpay1Cb2xkLnR0ZicpO1xuICBjb25zdCBjYXJkID0gbmV3IEdyZWV0aW5nc0NhcmQoKVxuICAgIC5zZXRBdmF0YXIobWVtYmVyLnVzZXIuZGlzcGxheUF2YXRhclVSTCgpKVxuICAgIC5zZXREaXNwbGF5TmFtZShtZW1iZXIuZGlzcGxheU5hbWUpXG4gICAgLnNldFR5cGUoJ3dlbGNvbWUnKVxuICAgIC5zZXRNZXNzYWdlKGBUaGFua3MgZm9yIGpvaW5pbmchIFlvdSBhcmUgbWVtYmVyICMke2d1aWxkLm1lbWJlckNvdW50fSFgKTtcblxuICBjb25zdCBhdHRhY2htZW50ID0gbmV3IEF0dGFjaG1lbnRCdWlsZGVyKGF3YWl0IGNhcmQuYnVpbGQoeyBmb3JtYXQ6ICdwbmcnIH0pLCB7IG5hbWU6ICd3ZWxjb21lLnBuZycgfSk7XG4gIGNoYW5uZWwuc2VuZCh7IGNvbnRlbnQ6IHdlbGNvbWVEYXRhLm1lc3NhZ2UucmVwbGFjZSgne3VzZXJ9JywgbWVtYmVyKS5yZXBsYWNlKCd7bn0nLCAnXFxuJyksIGZpbGVzOiBbYXR0YWNobWVudF0gfSk7XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7QUFBQSxTQUFTLHlCQUFvRjtBQUk3RixTQUFTLFlBQVk7QUFFckIsZUFBTyxzQkFBd0IsUUFBcUIsUUFBc0IsU0FBcUI7QUFDN0YsUUFBTSxjQUFjLE1BQU0sc0JBQWMsUUFBUSxFQUFFLFNBQVMsT0FBTyxNQUFNLEdBQUcsQ0FBQztBQUM1RSxNQUFJLENBQUM7QUFBYTtBQUVsQixRQUFNLFVBQVUsT0FBTyxNQUFNLFNBQVMsTUFBTSxJQUFJLFlBQVksU0FBUztBQUNyRSxNQUFJLENBQUM7QUFBUztBQUVkLFFBQU0sUUFBUSxPQUFPO0FBRXJCLE9BQUssWUFBWTtBQUNqQixRQUFNLEtBQUssU0FBUywwQkFBMEI7QUFDOUMsUUFBTSxPQUFPLElBQUkscUJBQWMsRUFDNUIsVUFBVSxPQUFPLEtBQUssaUJBQWlCLENBQUMsRUFDeEMsZUFBZSxPQUFPLFdBQVcsRUFDakMsUUFBUSxTQUFTLEVBQ2pCLFdBQVcsdUNBQXVDLE1BQU0sV0FBVyxHQUFHO0FBRXpFLFFBQU0sYUFBYSxJQUFJLGtCQUFrQixNQUFNLEtBQUssTUFBTSxFQUFFLFFBQVEsTUFBTSxDQUFDLEdBQUcsRUFBRSxNQUFNLGNBQWMsQ0FBQztBQUNyRyxVQUFRLEtBQUssRUFBRSxTQUFTLFlBQVksUUFBUSxRQUFRLFVBQVUsTUFBTSxFQUFFLFFBQVEsT0FBTyxJQUFJLEdBQUcsT0FBTyxDQUFDLFVBQVUsRUFBRSxDQUFDO0FBQ25IO0FBbkJPOyIsCiAgIm5hbWVzIjogW10KfQo=